import{p as e}from"./phaser-cxBNu8M8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();class s extends e.Scene{constructor(){super("Boot")}preload(){this.load.setPath("/res/phaser/games/falldown/dist"),this.load.image("lose","/assets/images/lose.jpg"),this.load.image("back","/assets/images/back.jpg"),this.load.image("missile0","/assets/images/missile0.png"),this.load.image("missile1","/assets/images/missile1.png"),this.load.spritesheet("crash","/assets/images/crash.png",{frameWidth:199,frameHeight:200}),this.load.spritesheet("life","/assets/images/life.png",{frameWidth:50,frameHeight:50})}create(){this.scene.start("Game")}}class t extends Phaser.Scene{constructor(){super("Game")}preload(){}create(){this.add.image(0,0,"back").setOrigin(0,0),this.launchMissile(),this.life1=this.add.sprite(50,30,"life"),this.life2=this.add.sprite(100,30,"life"),this.life3=this.add.sprite(150,30,"life"),this.anims.create({key:"crashAnim",frames:this.anims.generateFrameNumbers("crash",{start:0,end:4}),frameRate:7}),this.lifeCounter=3,this.physics.world.on("worldbounds",((e,s,t,i,a)=>{t&&(e.gameObject.disableBody(),e.gameObject.play("crashAnim"),--this.lifeCounter,2==this.lifeCounter?this.life3.setFrame(1):1==this.lifeCounter?this.life2.setFrame(1):0==this.lifeCounter&&(this.life1.setFrame(1),this.scene.start("GameOver")))}))}launchMissile(){const e=Math.floor(Math.random()*(this.sys.game.config.width-100))+50,s=Math.floor(2*Math.random()),t=this.physics.add.sprite(e,-100,`missile${s}`);t.setVelocity(0,100),t.setInteractive(),this.time.delayedCall(1e3,this.launchMissile,[],this),t.on("pointerdown",(()=>this.clickedMissile(t))),t.on("animationcomplete",this.animationComplete,this),t.setCollideWorldBounds(!0),t.body.onWorldBounds=!0,t.body.gravity.y=300}update(){console.log("update")}clickedMissile(e){e.play("crashAnim")}animationComplete(e,s,t){"crashAnim"===e.key&&t.destroy()}}class i extends e.Scene{constructor(){super("GameOver")}create(){this.add.image(0,0,"lose").setOrigin(0),this.input.once("pointerdown",(()=>{this.scene.start("Game")}))}}class a extends e.Scene{constructor(){super("MainMenu")}create(){this.add.image(512,384,"background"),this.add.image(512,300,"logo"),this.add.text(512,460,"Main Menu",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("Game")}))}}class r extends e.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(s=>{e.width=4+460*s}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png")}create(){this.scene.start("MainMenu")}}const o={type:Phaser.AUTO,width:960,height:640,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{y:300},debug:!1}},scene:[s,r,a,t,i]};new Phaser.Game(o);
