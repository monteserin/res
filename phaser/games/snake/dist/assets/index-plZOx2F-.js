import{p as e}from"./phaser-cxBNu8M8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();class s extends e.Scene{constructor(){super("Boot")}preload(){this.load.setPath("/res/phaser/games/snake/dist"),this.load.image("player","/assets/player.png"),this.load.image("food","/assets/food.png")}create(){this.scene.start("Game")}}class t extends Phaser.Scene{constructor(){super("Game")}create(){const e=this.getRandomXYCoordinates();this.player=this.physics.add.sprite(e.x,e.y,"player"),this.player.setVelocityX(150),this.cursors=this.input.keyboard.createCursorKeys(),this.createFood(),this.physics.add.overlap(this.player,this.food,this.collisionHandler,null,this),this.currentPosition=new Phaser.Math.Vector2(e.x,e.y),this.distanceThreshold=18,this.bodies=[],this.positions=[],this.physics.add.overlap(this.player,this.bodies,this.collideWithBody,null,this)}collideWithBody(e,s){s!==this.bodies[0]&&s!==this.bodies[1]&&alert("colisiÃ³n con la propia cola")}collisionHandler(e,s){this.eatFood()}createFood(){const e=this.getRandomXYCoordinates();this.food=this.physics.add.sprite(e.x,e.y,"food")}getRandomXYCoordinates(){const e=this.sys.game.config.width,s=this.sys.game.config.height;return{x:Phaser.Math.Between(0,e),y:Phaser.Math.Between(0,s)}}repositionFood(){const e=this.getRandomXYCoordinates();this.food.x=e.x,this.food.y=e.y}movePlayer(){this.cursors.left.isDown?(this.player.setVelocityX(-150),this.player.setVelocityY(0)):this.cursors.right.isDown?(this.player.setVelocityX(150),this.player.setVelocityY(0)):this.cursors.up.isDown?(this.player.setVelocityX(0),this.player.setVelocityY(-150)):this.cursors.down.isDown&&(this.player.setVelocityX(0),this.player.setVelocityY(150))}update(){this.movePlayer(),Phaser.Math.Distance.BetweenPoints(this.currentPosition,this.player)>this.distanceThreshold&&(this.currentPosition.copy(this.player),this.positions.push({x:this.currentPosition.x,y:this.currentPosition.y}),this.positions.length>this.bodies.length+this.distanceThreshold&&this.positions.shift());let e=this.positions.length-1;for(let s=0;s<this.bodies.length;s++){const t=this.bodies[s],i=this.positions[e];t.x=i.x,t.y=i.y,e--}}eatFood(){this.repositionFood();const e=this.positions[0],s=this.physics.add.sprite(e.x,e.y,"player");s.setDirectControl(),this.bodies.push(s)}}class i extends e.Scene{constructor(){super("GameOver")}create(){this.cameras.main.setBackgroundColor(16711680),this.add.image(512,384,"background").setAlpha(.5),this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}const o={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#028af8",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[s,t,i]};new Phaser.Game(o);
