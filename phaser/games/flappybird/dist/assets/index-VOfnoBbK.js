import{p as e}from"./phaser-cxBNu8M8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class t extends e.Scene{constructor(){super("Boot")}preload(){this.load.setPath("/res/phaser/games/flappybird/dist"),this.load.image("lose","/assets/lose.jpg"),this.load.image("back","/assets/back.jpg"),this.load.image("pipe0","/assets/pipe0.png"),this.load.image("pipeUp0","/assets/pipeUp0.png"),this.load.image("pipeDown0","/assets/pipeDown0.png"),this.load.image("pipe1","/assets/pipe1.png"),this.load.image("pipeUp1","/assets/pipeUp1.png"),this.load.image("pipeDown1","/assets/pipeDown1.png"),this.load.spritesheet("hero","/assets/hero.png",{frameWidth:50,frameHeight:50})}create(){this.anims.create({key:"fly",frames:this.anims.generateFrameNumbers("hero",{start:0,end:1}),frameRate:10,repeat:-1}),this.anims.create({key:"jump",frames:this.anims.generateFrameNumbers("hero",{start:2,end:2}),frameRate:7,repeat:1}),this.scene.start("Game")}}class s extends Phaser.Scene{constructor(){super("Game")}create(){const e=this.sys.game.config.width,t=this.sys.game.config.height;this.bg=this.add.tileSprite(0,0,e,t,"back").setOrigin(0).setScrollFactor(0),this.player=this.physics.add.sprite(50,100,"hero"),this.player.play("fly"),this.input.keyboard.on("keydown",(e=>{32===e.keyCode&&this.jump()})),this.input.on("pointerdown",(()=>this.jump())),this.player.on("animationcomplete",this.animationComplete,this),this.newPipe(),this.physics.world.on("worldbounds",(e=>{this.scene.start("GameOver")})),this.player.setCollideWorldBounds(!0),this.player.body.onWorldBounds=!0,this.player.body.gravity.y=300}update(e){this.bg.tilePositionX=.1*e}jump(){this.player.setVelocityY(-200),this.player.play("jump")}animationComplete(e,t,s){"jump"===e.key&&this.player.play("fly")}newPipe(){const e=this.physics.add.group(),t=Math.floor(5*Math.random())+1,s=Math.floor(2*Math.random());for(let i=0;i<8;i++)if(i!==t&&i!==t+1&&i!==t-1){let a;a=i==t-2?e.create(960,100*i,`pipeUp${s}`):i==t+2?e.create(960,100*i,`pipeDown${s}`):e.create(960,100*i,`pipe${s}`),a.body.allowGravity=!1}e.setVelocityX(-200),e.checkWorldBounds=!0,e.outOfBoundsKill=!0,this.physics.add.overlap(this.player,e,this.hitPipe,null,this),this.time.delayedCall(1e3,this.newPipe,[],this)}hitPipe(){this.scene.start("GameOver")}}class i extends e.Scene{constructor(){super("GameOver")}create(){this.add.image(0,0,"lose").setOrigin(0),this.input.once("pointerdown",(()=>{this.scene.start("Game")}))}}class a extends e.Scene{constructor(){super("MainMenu")}create(){this.add.image(512,384,"background"),this.add.image(512,300,"logo"),this.add.text(512,460,"Main Menu",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("Game")}))}}class r extends e.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png")}create(){this.scene.start("MainMenu")}}const o={type:Phaser.AUTO,width:960,height:640,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{y:300},debug:!1}},scene:[t,r,a,s,i]};new Phaser.Game(o);
